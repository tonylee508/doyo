{
  "log": {
    "level": "info",
    "timestamp": true
  },
  "experimental": {
    "clash_api": {
      "external_controller": "0.0.0.0:9090",
      "external_ui": "ui",
      "secret": "",
      "external_ui_download_url": "https://ghp.ci/https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip",
      "external_ui_download_detour": "直连",
      "default_mode": "rule"
    },
    "cache_file": {
      "enabled": true
    }
  },
  "dns": {
    "servers": [
      {"tag": "proxyDns", "address": "tls://8.8.8.8", "strategy": "prefer_ipv4", "detour": "默认"},
      {"tag": "localDns", "address": "223.5.5.5", "strategy": "prefer_ipv4", "detour": "直连"},
      {"tag": "block", "address": "rcode://success"}
    ],
    "rules": [
      {"outbound": "any", "server": "localDns", "disable_cache": true},
      {"rule_set": "geosite-cn", "server": "localDns"},
      {"clash_mode": "direct", "server": "localDns"},
      {"clash_mode": "global", "server": "proxyDns"},
      {"rule_set": "geosite-geolocation-!cn", "server": "proxyDns"}
    ],
    "final": "localDns"
  },
  "inbounds": [
    {
      "type": "tun",
      "stack": "system",
      "auto_route": true,
      "sniff": true,
      "platform": {
        "http_proxy": {
          "enabled": true,
          "server": "0.0.0.0",
          "server_port": 7890
        }
      }
    },
    {
      "type": "mixed",
      "listen": "0.0.0.0",
      "listen_port": 7890,
      "sniff": true
    }
  ],
  "outbounds": [
    {"tag": "直连", "type": "direct"},
    {"tag": "block", "type": "block"},
    {"tag": "dns-out", "type": "dns"},
    {"tag": "默认", "type": "urltest", "outbounds": ["香港", "日本", "台湾", "美国", "新加坡"], "url": "https://www.youtube.com/generate_204", "interval": "3m", "tolerance": 50},
    {"tag": "Final", "type": "selector", "outbounds": ["直连", "默认"]}
  ],
  "route": {
    "auto_detect_interface": true,
    "final": "Final",
    "rules": [
      {"port": 53, "outbound": "dns-out"},
      {"protocol": "dns", "outbound": "dns-out"},
      {"clash_mode": "direct", "outbound": "直连"},
      {"clash_mode": "global", "outbound": "默认"},
      {"rule_set": "geosite-cn", "outbound": "直连"},
      {"rule_set": "geosite-geolocation-!cn", "outbound": "默认"}
    ]
  }
}
